{"ast":null,"code":"import _toConsumableArray from\"C:/Users/User/dev/mesto-full/react-mesto-api-full/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"C:/Users/User/dev/mesto-full/react-mesto-api-full/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/User/dev/mesto-full/react-mesto-api-full/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import{Route,Routes,Navigate,useNavigate}from\"react-router-dom\";import ProtectedRoute from\"./ProtectedRoute\";import{api}from\"../utils/Api\";import*as auth from\"../utils/auth\";import{currentUserContext}from\"../contexts/CurrentUserContext\";import Header from\"./Header\";import Main from\"./Main\";import Footer from\"./Footer\";import InfoToolTip from\"./InfoTooltip\";import ImagePopup from\"./ImagePopup\";import EditProfilePopup from\"./EditProfilePopup\";import EditAvatarPopup from\"./EditAvatarPopup\";import AddPlacePopup from\"./AddPlacePopup\";import DeletePlacePopup from\"./DeletePlacePopup\";import Login from\"./Login\";import Register from\"./Register\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),isEditProfilePopupOpen=_React$useState2[0],setIsEditProfilePopupOpen=_React$useState2[1];/* profile-edit-popup */var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),isCardDeletePopupOpen=_React$useState4[0],setIsCardDeletePopupOpen=_React$useState4[1];/* card-delete-popup */var _React$useState5=React.useState(false),_React$useState6=_slicedToArray(_React$useState5,2),isNewAvatarPopupOpen=_React$useState6[0],setIsNewAvatarPopupOpen=_React$useState6[1];/* new-avatar-popup */var _React$useState7=React.useState(false),_React$useState8=_slicedToArray(_React$useState7,2),isCardAddPopupOpen=_React$useState8[0],setIsCardAddPopupOpen=_React$useState8[1];/* card-add-popup */ /* (loaders && other) */var _React$useState9=React.useState(false),_React$useState10=_slicedToArray(_React$useState9,2),isEditProfilePopupLoading=_React$useState10[0],setIsEditProfilePopupLoading=_React$useState10[1];var _React$useState11=React.useState(false),_React$useState12=_slicedToArray(_React$useState11,2),isCardDeletePopupLoading=_React$useState12[0],setIsCardDeletePopupLoading=_React$useState12[1];var _React$useState13=React.useState(false),_React$useState14=_slicedToArray(_React$useState13,2),isNewAvatarPopupLoading=_React$useState14[0],setIsNewAvatarPopupLoading=_React$useState14[1];var _React$useState15=React.useState(false),_React$useState16=_slicedToArray(_React$useState15,2),isCardAddPopupLoading=_React$useState16[0],setIsCardAddPopupLoading=_React$useState16[1];var _React$useState17=React.useState(\"\"),_React$useState18=_slicedToArray(_React$useState17,2),selectedCardToDelete=_React$useState18[0],setSelectedCardToDelete=_React$useState18[1];/*_____________________*/ /*_states_of_image|imagePopup______*/var _React$useState19=React.useState({name:\"\",link:\"\"}),_React$useState20=_slicedToArray(_React$useState19,2),selectedCard=_React$useState20[0],setSelectedCard=_React$useState20[1];var _React$useState21=React.useState(false),_React$useState22=_slicedToArray(_React$useState21,2),isElementPopupOpen=_React$useState22[0],setIsElementPopupOpen=_React$useState22[1];/*---------------------------*/ /* currentUser_state */var _React$useState23=React.useState({avatar:\"\",name:\"\",description:\"\",id:\"\"}),_React$useState24=_slicedToArray(_React$useState23,2),currentUser=_React$useState24[0],setCurrentUser=_React$useState24[1];/*---------------------------*/ /*_state_of_loggedIn || currentEmail (user)______*/var _React$useState25=React.useState(false),_React$useState26=_slicedToArray(_React$useState25,2),loggedIn=_React$useState26[0],setLoggedIn=_React$useState26[1];var _React$useState27=React.useState(\"example@mail.com\"),_React$useState28=_slicedToArray(_React$useState27,2),currentEmail=_React$useState28[0],setCurrentEmail=_React$useState28[1];/*---------------------------*/ /* info-tool-tip */var _React$useState29=React.useState(false),_React$useState30=_slicedToArray(_React$useState29,2),isInfoToolTipOpen=_React$useState30[0],setIsInfoToolTipOpen=_React$useState30[1];var _React$useState31=React.useState(true),_React$useState32=_slicedToArray(_React$useState31,2),statusOfInfoToolTip=_React$useState32[0],setStatusOfInfoToolTip=_React$useState32[1];/*---------------------------*/ /*_state_of_cardList______*/var _React$useState33=React.useState([]),_React$useState34=_slicedToArray(_React$useState33,2),cards=_React$useState34[0],setCards=_React$useState34[1];/*---------------------------*/var navigate=useNavigate();React.useEffect(function(){if(localStorage.getItem(\"jwt\")){var token=localStorage.getItem(\"jwt\");auth.checkToken(token).then(function(info){if(info.data.email){setCurrentEmail(info.data.email);setLoggedIn(true);}else{localStorage.clear(\"jwt\");/* защита уязвимости */}}).catch(function(err){showStatus(false);localStorage.clear(\"jwt\");console.log(err);});}function close(e){if(e.keyCode===27)closeAllPopups();}window.addEventListener(\"keydown\",close);return function(){return window.removeEventListener(\"keydown\",close);};},[]);React.useEffect(function(){if(loggedIn){var token=localStorage.getItem(\"jwt\");Promise.all([api.getInfoAboutUser(token),api.getInitialCards(token)]).then(function(_ref){var _ref2=_slicedToArray(_ref,2),userData=_ref2[0],cards=_ref2[1];setCurrentUser(_objectSpread(_objectSpread({},currentUser),{},{avatar:userData.data.avatar,name:userData.data.name,description:userData.data.about,id:userData.data._id}));setCards(cards.data);}).catch(function(err){console.log(err);});}},[loggedIn]);/* functions_for_auth */function showStatus(status){setStatusOfInfoToolTip(status);setIsInfoToolTipOpen(true);}function handleAuthRegister(info){auth.register(info.email,info.password).then(function(res){console.log(res);if(res.email){showStatus(true);navigate(\"/sign-in\");}else{showStatus(false);}}).catch(function(err){showStatus(false);console.log(err);});}function handleAuthLogin(info){auth.authorize(info.email,info.password).then(function(){if(localStorage.getItem(\"jwt\")){var token=localStorage.getItem(\"jwt\");auth.checkToken(token).then(function(info){console.log(info);setCurrentEmail(info.data.email);setLoggedIn(true);}).catch(function(err){showStatus(false);console.log(err);});}else{showStatus(false);}}).catch(function(err){showStatus(false);console.log(err);});}function onUserLeave(){setLoggedIn(false);localStorage.clear(\"jwt\");}/*---------------------------*/ /* functions_for_user-data-submits */function handleUpdateUserInfo(newUserInfo){setIsEditProfilePopupLoading(true);var token=localStorage.getItem(\"jwt\");api.setInfoAboutUser(newUserInfo,token).then(function(res){console.log(res);setCurrentUser(_objectSpread(_objectSpread({},currentUser),{},{name:res.data.name,description:res.data.about}));setIsEditProfilePopupOpen(false);}).catch(function(err){console.log(err);}).finally(function(){setIsEditProfilePopupLoading(false);});}function handleUpdateUserAvatar(info){setIsNewAvatarPopupLoading(true);var token=localStorage.getItem(\"jwt\");api.uploadNewAvatar(info,token).then(function(res){setCurrentUser(_objectSpread(_objectSpread({},currentUser),{},{avatar:res.data.avatar}));setIsNewAvatarPopupOpen(false);}).catch(function(err){console.log(err);}).finally(function(){setIsNewAvatarPopupLoading(false);});}/*---------------------------*/ /* functions_for_cards && card-add-submit */function handleCardLike(card){var isLiked=card.likes.some(function(i){return i===currentUser.id;});var token=localStorage.getItem(\"jwt\");api.changeLikeCardStatus(card._id,!isLiked,token).then(function(info){setCards(function(state){return state.map(function(c){return c._id===card._id?info.data:c;});});});}function handleCardDelete(id){setIsCardDeletePopupLoading(true);var token=localStorage.getItem(\"jwt\");api.deleteCard(id,token).then(function(){setCards(function(state){return state.filter(function(c){return c._id!==id;});});setIsCardDeletePopupOpen(false);}).catch(function(err){console.log(err);}).finally(function(){setIsCardDeletePopupLoading(false);});}function handleAddPlaceSubmit(card){setIsCardAddPopupLoading(true);var token=localStorage.getItem(\"jwt\");console.log(token);api.addNewCard(card,token).then(function(newCard){setCards([newCard.data].concat(_toConsumableArray(cards)));setIsCardAddPopupOpen(false);}).catch(function(err){console.log(err);}).finally(function(){setIsCardAddPopupLoading(false);});}/*---------------------------*/ /* popup_functions (open | close) */function closeAllPopups(){setIsInfoToolTipOpen(false);setStatusOfInfoToolTip(true);setIsEditProfilePopupOpen(false);setIsNewAvatarPopupOpen(false);setIsCardDeletePopupOpen(false);setIsCardAddPopupOpen(false);setIsElementPopupOpen(false);setSelectedCard({name:\"\",link:\"\"});}function handleOpenProfilePopup(){setIsEditProfilePopupOpen(true);}function handleOpenCardAddPopup(){setIsCardAddPopupOpen(true);}function handleOpenNewAvatarPopup(){setIsNewAvatarPopupOpen(true);}/*---------------------------*/return/*#__PURE__*/_jsx(\"div\",{className:\"App page\",children:/*#__PURE__*/_jsxs(currentUserContext.Provider,{value:currentUser,children:[/*#__PURE__*/_jsx(Header,{onUserLeave:onUserLeave,email:currentEmail}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/main\",element:/*#__PURE__*/_jsxs(ProtectedRoute,{loggedIn:loggedIn,children:[/*#__PURE__*/_jsx(Main,{onEditProfile:handleOpenProfilePopup,onCardAddButton:handleOpenCardAddPopup,onNewAvatar:handleOpenNewAvatarPopup,onCardClick:function onCardClick(name,link){setSelectedCard({name:name,link:link});setIsElementPopupOpen(true);},onCardLike:function onCardLike(card){handleCardLike(card);},onCardDelete:function onCardDelete(card){setIsCardDeletePopupOpen(true);setSelectedCardToDelete(card._id);},cardList:cards,loggedIn:loggedIn}),/*#__PURE__*/_jsx(Footer,{})]})}),/*#__PURE__*/_jsx(Route,{path:\"/sign-in\",element:!loggedIn?/*#__PURE__*/_jsx(Login,{onAuthLogin:handleAuthLogin}):/*#__PURE__*/_jsx(Navigate,{to:\"/main\"})}),/*#__PURE__*/_jsx(Route,{path:\"/sign-up\",element:!loggedIn?/*#__PURE__*/_jsx(Register,{onAuthRegister:handleAuthRegister}):/*#__PURE__*/_jsx(Navigate,{to:\"/main\"})}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/\",element:loggedIn?/*#__PURE__*/_jsx(Navigate,{to:\"/main\"}):/*#__PURE__*/_jsx(Navigate,{to:\"/sign-in\"})}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"*\",element:loggedIn?/*#__PURE__*/_jsx(Navigate,{to:\"/main\"}):/*#__PURE__*/_jsx(Navigate,{to:\"/sign-in\"})})]}),/*#__PURE__*/_jsx(InfoToolTip,{isOpen:isInfoToolTipOpen,onClose:closeAllPopups,status:statusOfInfoToolTip}),/*#__PURE__*/_jsx(EditAvatarPopup,{isOpen:isNewAvatarPopupOpen,onClose:closeAllPopups,onUpdateUserAvatar:function onUpdateUserAvatar(info){handleUpdateUserAvatar(info);},isLoading:isNewAvatarPopupLoading}),/*#__PURE__*/_jsx(EditProfilePopup,{isOpen:isEditProfilePopupOpen,onClose:closeAllPopups,isLoading:isEditProfilePopupLoading,onUpdateUserInfo:function onUpdateUserInfo(newInfo){handleUpdateUserInfo(newInfo);}}),/*#__PURE__*/_jsx(AddPlacePopup,{isOpen:isCardAddPopupOpen,onClose:closeAllPopups,isLoading:isCardAddPopupLoading,onAddPlace:function onAddPlace(card){handleAddPlaceSubmit(card);}}),/*#__PURE__*/_jsx(DeletePlacePopup,{isOpen:isCardDeletePopupOpen,onClose:closeAllPopups,isLoading:isCardDeletePopupLoading,onDeletePlace:function onDeletePlace(){handleCardDelete(selectedCardToDelete);}}),/*#__PURE__*/_jsx(ImagePopup,{onClose:closeAllPopups,isOpen:isElementPopupOpen,card:selectedCard})]})});}export default App;","map":{"version":3,"sources":["C:/Users/User/dev/mesto-full/react-mesto-api-full/frontend/src/components/App.js"],"names":["React","Route","Routes","Navigate","useNavigate","ProtectedRoute","api","auth","currentUserContext","Header","Main","Footer","InfoToolTip","ImagePopup","EditProfilePopup","EditAvatarPopup","AddPlacePopup","DeletePlacePopup","Login","Register","App","useState","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isCardDeletePopupOpen","setIsCardDeletePopupOpen","isNewAvatarPopupOpen","setIsNewAvatarPopupOpen","isCardAddPopupOpen","setIsCardAddPopupOpen","isEditProfilePopupLoading","setIsEditProfilePopupLoading","isCardDeletePopupLoading","setIsCardDeletePopupLoading","isNewAvatarPopupLoading","setIsNewAvatarPopupLoading","isCardAddPopupLoading","setIsCardAddPopupLoading","selectedCardToDelete","setSelectedCardToDelete","name","link","selectedCard","setSelectedCard","isElementPopupOpen","setIsElementPopupOpen","avatar","description","id","currentUser","setCurrentUser","loggedIn","setLoggedIn","currentEmail","setCurrentEmail","isInfoToolTipOpen","setIsInfoToolTipOpen","statusOfInfoToolTip","setStatusOfInfoToolTip","cards","setCards","navigate","useEffect","localStorage","getItem","token","checkToken","then","info","data","email","clear","catch","err","showStatus","console","log","close","e","keyCode","closeAllPopups","window","addEventListener","removeEventListener","Promise","all","getInfoAboutUser","getInitialCards","userData","about","_id","status","handleAuthRegister","register","password","res","handleAuthLogin","authorize","onUserLeave","handleUpdateUserInfo","newUserInfo","setInfoAboutUser","finally","handleUpdateUserAvatar","uploadNewAvatar","handleCardLike","card","isLiked","likes","some","i","changeLikeCardStatus","state","map","c","handleCardDelete","deleteCard","filter","handleAddPlaceSubmit","addNewCard","newCard","handleOpenProfilePopup","handleOpenCardAddPopup","handleOpenNewAvatarPopup","newInfo"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { Route, Routes, Navigate, useNavigate } from \"react-router-dom\";\nimport ProtectedRoute from \"./ProtectedRoute\";\nimport { api } from \"../utils/Api\";\nimport * as auth from \"../utils/auth\";\nimport { currentUserContext } from \"../contexts/CurrentUserContext\";\nimport Header from \"./Header\";\nimport Main from \"./Main\";\nimport Footer from \"./Footer\";\nimport InfoToolTip from \"./InfoTooltip\";\nimport ImagePopup from \"./ImagePopup\";\nimport EditProfilePopup from \"./EditProfilePopup\";\nimport EditAvatarPopup from \"./EditAvatarPopup\";\nimport AddPlacePopup from \"./AddPlacePopup\";\nimport DeletePlacePopup from \"./DeletePlacePopup\";\nimport Login from \"./Login\";\nimport Register from \"./Register\";\n\nfunction App() {\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false); /* profile-edit-popup */\n  const [isCardDeletePopupOpen, setIsCardDeletePopupOpen] = React.useState(false); /* card-delete-popup */\n  const [isNewAvatarPopupOpen, setIsNewAvatarPopupOpen] = React.useState(false); /* new-avatar-popup */\n  const [isCardAddPopupOpen, setIsCardAddPopupOpen] = React.useState(false); /* card-add-popup */\n\n  /* (loaders && other) */\n  const [isEditProfilePopupLoading, setIsEditProfilePopupLoading] = React.useState(false);\n  const [isCardDeletePopupLoading, setIsCardDeletePopupLoading] = React.useState(false);\n  const [isNewAvatarPopupLoading, setIsNewAvatarPopupLoading] = React.useState(false);\n  const [isCardAddPopupLoading, setIsCardAddPopupLoading] = React.useState(false);\n  const [selectedCardToDelete, setSelectedCardToDelete] = React.useState(\"\");\n  /*_____________________*/\n\n  /*_states_of_image|imagePopup______*/\n  const [selectedCard, setSelectedCard] = React.useState({\n    name: \"\",\n    link: \"\",\n  });\n  const [isElementPopupOpen, setIsElementPopupOpen] = React.useState(false);\n  /*---------------------------*/\n\n  /* currentUser_state */\n  const [currentUser, setCurrentUser] = React.useState({\n    avatar: \"\",\n    name: \"\",\n    description: \"\",\n    id: \"\",\n  });\n  /*---------------------------*/\n\n  /*_state_of_loggedIn || currentEmail (user)______*/\n  const [loggedIn, setLoggedIn] = React.useState(false);\n  const [currentEmail, setCurrentEmail] = React.useState(\"example@mail.com\");\n  /*---------------------------*/\n\n  /* info-tool-tip */\n  const [isInfoToolTipOpen, setIsInfoToolTipOpen] = React.useState(false);\n  const [statusOfInfoToolTip, setStatusOfInfoToolTip] = React.useState(true);\n  /*---------------------------*/\n\n  /*_state_of_cardList______*/\n  const [cards, setCards] = React.useState([]);\n  /*---------------------------*/\n\n  const navigate = useNavigate();\n\n  React.useEffect(() => {\n    if (localStorage.getItem(\"jwt\")) {\n      let token = localStorage.getItem(\"jwt\");\n      auth\n        .checkToken(token)\n        .then((info) => {\n          if (info.data.email) {\n            setCurrentEmail(info.data.email);\n            setLoggedIn(true);\n          } else {\n            localStorage.clear(\n              \"jwt\"\n            ); /* защита уязвимости */\n          }\n        })\n        .catch((err) => {\n          showStatus(false);\n          localStorage.clear(\"jwt\");\n          console.log(err);\n        });\n    }\n    function close(e) {\n      if (e.keyCode === 27) closeAllPopups();\n    }\n    window.addEventListener(\"keydown\", close);\n    return () => window.removeEventListener(\"keydown\", close);\n  }, []);\n\n  React.useEffect(() => {\n    if(loggedIn){\n      let token = localStorage.getItem(\"jwt\");\n      Promise.all([api.getInfoAboutUser(token), api.getInitialCards(token)])\n      .then(([userData, cards]) => {\n        setCurrentUser({\n          ...currentUser,\n          avatar: userData.data.avatar,\n          name: userData.data.name,\n          description: userData.data.about,\n          id: userData.data._id,\n        });\n        setCards(cards.data);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n    }\n  }, [loggedIn]);\n\n  /* functions_for_auth */\n  function showStatus(status) {\n    setStatusOfInfoToolTip(status);\n    setIsInfoToolTipOpen(true); \n  }\n\n  function handleAuthRegister(info) {\n    auth\n      .register(info.email, info.password)\n      .then((res) => {\n        console.log(res);\n        if (res.email) {\n          showStatus(true);\n          navigate(\"/sign-in\");\n        } else {\n          showStatus(false);\n        }\n      })\n      .catch((err) => {\n        showStatus(false);\n        console.log(err);\n      });\n  }\n  function handleAuthLogin(info) {\n    auth\n      .authorize(info.email, info.password)\n      .then(() => {\n        if (localStorage.getItem(\"jwt\")) {\n          let token = localStorage.getItem(\"jwt\");\n          auth\n            .checkToken(token)\n            .then((info) => {\n              console.log(info);\n              setCurrentEmail(info.data.email);\n              setLoggedIn(true);\n            })\n            .catch((err) => {\n              showStatus(false);\n              console.log(err);\n            });\n        } else {\n          showStatus(false);\n        }\n      })\n      .catch((err) => {\n        showStatus(false);\n        console.log(err);\n      });\n  }\n\n  function onUserLeave() {\n    setLoggedIn(false);\n    localStorage.clear(\"jwt\");\n  }\n  /*---------------------------*/\n\n  /* functions_for_user-data-submits */\n  function handleUpdateUserInfo(newUserInfo) {\n    setIsEditProfilePopupLoading(true);\n    let token = localStorage.getItem(\"jwt\");\n    api\n      .setInfoAboutUser(newUserInfo, token)\n      .then((res) => {\n        console.log(res);\n        setCurrentUser({\n          ...currentUser,\n          name: res.data.name,\n          description: res.data.about,\n        });\n        setIsEditProfilePopupOpen(false);\n      })\n      .catch((err) => {\n        console.log(err);\n      })\n      .finally(() => {\n        setIsEditProfilePopupLoading(false);\n      });\n  }\n\n  function handleUpdateUserAvatar(info) {\n    setIsNewAvatarPopupLoading(true);\n    let token = localStorage.getItem(\"jwt\");\n    api\n      .uploadNewAvatar(info, token)\n      .then((res) => {\n        setCurrentUser({\n          ...currentUser,\n          avatar: res.data.avatar,\n        });\n        setIsNewAvatarPopupOpen(false);\n      })\n      .catch((err) => {\n        console.log(err);\n      })\n      .finally(() => {\n        setIsNewAvatarPopupLoading(false);\n      });\n  }\n  /*---------------------------*/\n\n  /* functions_for_cards && card-add-submit */\n  function handleCardLike(card) {\n    const isLiked = card.likes.some((i) => i === currentUser.id);\n    let token = localStorage.getItem(\"jwt\");\n    api.changeLikeCardStatus(card._id, !isLiked, token).then((info) => {\n      setCards((state) => state.map((c) => (c._id === card._id ? info.data : c)));\n    });\n  }\n\n  function handleCardDelete(id) {\n    setIsCardDeletePopupLoading(true);\n    let token = localStorage.getItem(\"jwt\");\n    api\n      .deleteCard(id, token)\n      .then(() => {\n        setCards((state) => state.filter((c) => c._id !== id));\n        setIsCardDeletePopupOpen(false);\n      })\n      .catch((err) => {\n        console.log(err);\n      })\n      .finally(() => {\n        setIsCardDeletePopupLoading(false);\n      });\n  }\n\n  function handleAddPlaceSubmit(card) {\n    setIsCardAddPopupLoading(true);\n    let token = localStorage.getItem(\"jwt\");\n    console.log(token);\n    api\n      .addNewCard(card, token)\n      .then((newCard) => {\n        setCards([newCard.data, ...cards]);\n        setIsCardAddPopupOpen(false);\n      })\n      .catch((err) => {\n        console.log(err);\n      })\n      .finally(() => {\n        setIsCardAddPopupLoading(false);\n      });\n  }\n  /*---------------------------*/\n\n  /* popup_functions (open | close) */\n  function closeAllPopups() {\n    setIsInfoToolTipOpen(false);\n    setStatusOfInfoToolTip(true);\n    setIsEditProfilePopupOpen(false);\n    setIsNewAvatarPopupOpen(false);\n    setIsCardDeletePopupOpen(false);\n    setIsCardAddPopupOpen(false);\n    setIsElementPopupOpen(false);\n    setSelectedCard({ name: \"\", link: \"\" });\n  }\n\n  function handleOpenProfilePopup() {\n    setIsEditProfilePopupOpen(true);\n  }\n\n  function handleOpenCardAddPopup() {\n    setIsCardAddPopupOpen(true);\n  }\n\n  function handleOpenNewAvatarPopup() {\n    setIsNewAvatarPopupOpen(true);\n  }\n\n  /*---------------------------*/\n  return (\n    <div className=\"App page\">\n      <currentUserContext.Provider value={currentUser}>\n        <Header onUserLeave={onUserLeave} email={currentEmail} />\n        <Routes>\n          <Route\n            path=\"/main\"\n            element={\n              <ProtectedRoute loggedIn={loggedIn}>\n                <Main\n                  onEditProfile={handleOpenProfilePopup}\n                  onCardAddButton={handleOpenCardAddPopup}\n                  onNewAvatar={handleOpenNewAvatarPopup}\n                  onCardClick={(name, link) => {\n                    setSelectedCard({ name: name, link: link });\n                    setIsElementPopupOpen(true);\n                  }}\n                  onCardLike={(card) => {\n                    handleCardLike(card);\n                  }}\n                  onCardDelete={(card) => {\n                    setIsCardDeletePopupOpen(true);\n                    setSelectedCardToDelete(card._id);\n                  }}\n                  cardList={cards}\n                  loggedIn={loggedIn}\n                />\n                <Footer />\n              </ProtectedRoute>\n            }\n          />\n          <Route\n            path=\"/sign-in\"\n            element={\n              !loggedIn ? (\n                <Login onAuthLogin={handleAuthLogin} />\n              ) : (\n                <Navigate to=\"/main\" />\n              )\n            }\n          />\n          <Route\n            path=\"/sign-up\"\n            element={\n              !loggedIn ? (\n                <Register onAuthRegister={handleAuthRegister} />\n              ) : (\n                <Navigate to=\"/main\" />\n              )\n            }\n          />\n          <Route\n            exact\n            path=\"/\"\n            element={\n              loggedIn ? <Navigate to=\"/main\" /> : <Navigate to=\"/sign-in\" />\n            }\n          />\n          <Route\n            exact\n            path=\"*\"\n            element={\n              loggedIn ? <Navigate to=\"/main\" /> : <Navigate to=\"/sign-in\" />\n            }\n          />\n        </Routes>\n\n        {/*___________overlays_____________*/}\n        {/*.info-tool-tip (popup).*/}\n        <InfoToolTip\n          isOpen={isInfoToolTipOpen}\n          onClose={closeAllPopups}\n          status={statusOfInfoToolTip}\n        />\n        {/*.new-avatar-popup.*/}\n        <EditAvatarPopup\n          isOpen={isNewAvatarPopupOpen}\n          onClose={closeAllPopups}\n          onUpdateUserAvatar={(info) => {\n            handleUpdateUserAvatar(info);\n          }}\n          isLoading={isNewAvatarPopupLoading}\n        />\n\n        {/*.profile-edit-popup.*/}\n        <EditProfilePopup\n          isOpen={isEditProfilePopupOpen}\n          onClose={closeAllPopups}\n          isLoading={isEditProfilePopupLoading}\n          onUpdateUserInfo={(newInfo) => {\n            handleUpdateUserInfo(newInfo);\n          }}\n        />\n\n        {/*.card-add-popup.*/}\n        <AddPlacePopup\n          isOpen={isCardAddPopupOpen}\n          onClose={closeAllPopups}\n          isLoading={isCardAddPopupLoading}\n          onAddPlace={(card) => {\n            handleAddPlaceSubmit(card);\n          }}\n        />\n\n        {/*.card-delete-popup.*/}\n        <DeletePlacePopup\n          isOpen={isCardDeletePopupOpen}\n          onClose={closeAllPopups}\n          isLoading={isCardDeletePopupLoading}\n          onDeletePlace={() => {\n            handleCardDelete(selectedCardToDelete);\n          }}\n        />\n\n        {/*.element-popup.*/}\n        <ImagePopup\n          onClose={closeAllPopups}\n          isOpen={isElementPopupOpen}\n          card={selectedCard}\n        />\n      </currentUserContext.Provider>\n      {/* весь код отформатирован при помощи prettier(vs-code) */}\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}